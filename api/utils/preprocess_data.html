<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>utils.preprocess_data module &mdash; T-Res 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="utils.process_data module" href="process_data.html" />
    <link rel="prev" title="utils.ner module" href="ner.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> T-Res
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../t-res-api/index.html">Running T-Res as API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../geoparser/index.html"><code class="docutils literal notranslate"><span class="pre">geoparser</span></code> module</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html"><code class="docutils literal notranslate"><span class="pre">utils</span></code> module</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="deezy_processing.html"><code class="docutils literal notranslate"><span class="pre">utils.deezy_processing</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="get_data.html"><code class="docutils literal notranslate"><span class="pre">utils.get_data</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ner.html"><code class="docutils literal notranslate"><span class="pre">utils.ner</span></code> module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">utils.preprocess_data</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="process_data.html"><code class="docutils literal notranslate"><span class="pre">utils.process_data</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="process_wikipedia.html"><code class="docutils literal notranslate"><span class="pre">utils.process_wikipedia</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rel_e2e.html"><code class="docutils literal notranslate"><span class="pre">utils.rel_e2e</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rel_utils.html"><code class="docutils literal notranslate"><span class="pre">utils.rel_utils</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rel/index.html"><code class="docutils literal notranslate"><span class="pre">utils.REL</span></code> module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../other-files/index.html">Other files in repository</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">T-Res</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">API Documentation</a> &raquo;</li>
          <li><a href="index.html"><code class="docutils literal notranslate"><span class="pre">utils</span></code> module</a> &raquo;</li>
      <li><code class="docutils literal notranslate"><span class="pre">utils.preprocess_data</span></code> module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api/utils/preprocess_data.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="utils-preprocess-data-module">
<h1><code class="docutils literal notranslate"><span class="pre">utils.preprocess_data</span></code> module<a class="headerlink" href="#utils-preprocess-data-module" title="Permalink to this headline"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="utils.preprocess_data.turn_wikipedia2wikidata">
<span class="sig-prename descclassname"><span class="pre">utils.preprocess_data.</span></span><span class="sig-name descname"><span class="pre">turn_wikipedia2wikidata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wikipedia_title</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.preprocess_data.turn_wikipedia2wikidata" title="Permalink to this definition"></a></dt>
<dd><p>Get wikidata ID from wikipedia URL</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.preprocess_data.reconstruct_sentences">
<span class="sig-prename descclassname"><span class="pre">utils.preprocess_data.</span></span><span class="sig-name descname"><span class="pre">reconstruct_sentences</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dTokens</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.preprocess_data.reconstruct_sentences" title="Permalink to this definition"></a></dt>
<dd><p>Given the dictionary of tokens (with their positional information
in the document and associated annotations), reconstruct all sentences
in the document (taking into account white spaces to make sure character
positions match).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.preprocess_data.process_lwm_for_ner">
<span class="sig-prename descclassname"><span class="pre">utils.preprocess_data.</span></span><span class="sig-name descname"><span class="pre">process_lwm_for_ner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tsv_topres_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.preprocess_data.process_lwm_for_ner" title="Permalink to this definition"></a></dt>
<dd><p>Process LwM data for training a NER model, where each sentence has an id,
and a list of tokens and assigned ner_tags using the BIO scheme, e.g.:</p>
<blockquote>
<div><p>&gt; id: 10813493_1 # document_id + “_” + sentence_id
&gt; ner_tags: [‘B-LOC’, ‘O’]
&gt; tokens: [‘INDIA’, ‘.’]</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.preprocess_data.process_lwm_for_linking">
<span class="sig-prename descclassname"><span class="pre">utils.preprocess_data.</span></span><span class="sig-name descname"><span class="pre">process_lwm_for_linking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tsv_topres_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gazetteer_ids</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.preprocess_data.process_lwm_for_linking" title="Permalink to this definition"></a></dt>
<dd><p>Process LwM data for performing entity linking, resulting in a dataframe with
one toponym per row and its annotation and resolution in columns.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.preprocess_data.aggregate_hipe_entities">
<span class="sig-prename descclassname"><span class="pre">utils.preprocess_data.</span></span><span class="sig-name descname"><span class="pre">aggregate_hipe_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lEntities</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.preprocess_data.aggregate_hipe_entities" title="Permalink to this definition"></a></dt>
<dd><p>Agggregate split entities in HIPE.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.preprocess_data.process_hipe_for_linking">
<span class="sig-prename descclassname"><span class="pre">utils.preprocess_data.</span></span><span class="sig-name descname"><span class="pre">process_hipe_for_linking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hipe_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gazetteer_ids</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.preprocess_data.process_hipe_for_linking" title="Permalink to this definition"></a></dt>
<dd><p>Process LwM data for performing entity linking, resulting in a dataframe with
one toponym per row and its annotation and resolution in columns.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.preprocess_data.process_tsv">
<span class="sig-prename descclassname"><span class="pre">utils.preprocess_data.</span></span><span class="sig-name descname"><span class="pre">process_tsv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.preprocess_data.process_tsv" title="Permalink to this definition"></a></dt>
<dd><p>This function takes a .tsv (webanno 3.0) file and parses it.
It returns a dictionary (dTokens) that maps each token with
its position in the sentence and the associated annotations.
In particular, the keys in dTokens are tuples of two elements
(the sentence number in the document, and the character position
of a token in the document). The values of dTokens are tuples
of six elements (the actual token, the wikipedia url, the
toponym class, the sentence number in the document, the character
position of a token in the document, and the character end
position of a token in the document).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.preprocess_data.fine_to_coarse">
<span class="sig-prename descclassname"><span class="pre">utils.preprocess_data.</span></span><span class="sig-name descname"><span class="pre">fine_to_coarse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.preprocess_data.fine_to_coarse" title="Permalink to this definition"></a></dt>
<dd><p>This function takes a list of fine-grained tags and returns the coarse
equivalent.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ner.html" class="btn btn-neutral float-left" title="utils.ner module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="process_data.html" class="btn btn-neutral float-right" title="utils.process_data module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Federico Nanni.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>